<!DOCTYPE html>
<html>
<body>

<h2>DELETE /users/{id}</h2>
<form id="delete-user-form">
  <label for="id">ID:</label><br>
  <input type="text" id="id" name="id"><br>
  <input type="submit" value="Submit">
</form> 

<script>
document.getElementById('delete-user-form').addEventListener('submit', function(e) {
  e.preventDefault();
  var id = document.getElementById('id').value;
  fetch('/users/' + id, {
    method: 'DELETE'
  })
  .then(response => {
    if (!response.ok) {
      // If the server responds with an error status code, throw an error
      return response.text().then(text => { throw new Error(text); });
    }
    return response.text();
  })
  .then(data => {
    // Display the success message
    alert('User deleted successfully');
    // Refresh the users table
    fetch('/footer.html')
      .then(response => response.text())
      .then(footer => {
        document.getElementById('footer').innerHTML = footer;
      });
  })
  .catch(error => {
    // Display the error message
    alert(error);
  });
});
</script>

<div id="footer"></div>

<script>
// Function to load the footer
function loadFooter() {
  fetch('/footer.html')
    .then(response => response.text())
    .then(footer => {
      document.getElementById('footer').innerHTML = footer;
      // Find the script tag in the footer and execute it
      var script = document.getElementById('footer').querySelector('script');
      eval(script.textContent);
    })
    .catch(error => {
      console.error('Error:', error); // Log any errors
    });
}

// Load the footer when the page is loaded
loadFooter();

// Auto-refresh the footer every 5 seconds
setInterval(loadFooter, 5000);
</script>

</body>
</html>